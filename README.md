# Курсовая работа #5. Работа с базами данных

### Цель работы
В рамках проекта необходимо получить данные о компаниях и вакансиях с сайта hh.ru, 
спроектировать таблицы в БД PostgreSQL, загрузить таблицы полученными данными и 
реализовать заданные выборки из БД запросами SQL из Python методами класса DBManager.

### Используется
* python (3.11)
* requests
* psycopg2
* json
* time
* configparser

### Установка
1. Скопировать всё содержимое из репозитория в новый каталог.
2. В среде pycharm использовать poetry
3. Установить требуемые пакеты
4. В файле database.ini прописать параметры подключения к БД
Структура database.ini:
[postgresql]
host=
port=
user=
password=
[user_db]
user_db=

### Точка входа: main.py
Работа с программой посредством меню. Интересующие компании извлекаются из файла company.txt
config.py - формирует словарь с параметрами подключения к БД PostgreSQL
БД создается и заполняется с помощью функций из utils.py.
Заданные выборки формируются методами класса DBManager:
- `get_companies_and_vacancies_count()`: получает список всех компаний и количество вакансий 
- у каждой компании.
- `get_all_vacancies()`: получает список всех вакансий с указанием названия компании, 
- названия вакансии и зарплаты и ссылки на вакансию.
- `get_avg_salary()`: получает среднюю зарплату по вакансиям.
- `get_vacancies_with_higher_salary()`: получает список всех вакансий, у которых зарплата 
- выше средней по всем вакансиям.
- `get_vacancies_with_keyword()`: получает список всех вакансий, в названии которых содержатся 
- переданные в метод слова, например “python”.

Все SQL запросы - в коде.

Функция get_employers() -> list:
    Формирует список работодателей перебором всех ID HeadHunter
    с ключевым словом 'разработка' и с открытыми вакансиями.
В main не используется (т.к. долго работает и нагружает сайт), но может быть полезна
ввиду избирательности, т.е. выбора только "нужных" компаний.
Тот же фильтр используется в других функциях utils.py


